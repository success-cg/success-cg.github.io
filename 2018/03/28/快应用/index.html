<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>快应用 | 陈功【趣店】</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="快应用：十大手机门派围攻光明顶（微信）">
<meta property="og:type" content="article">
<meta property="og:title" content="快应用">
<meta property="og:url" content="http://yoursite.com/2018/03/28/快应用/index.html">
<meta property="og:site_name" content="陈功【趣店】">
<meta property="og:description" content="快应用：十大手机门派围攻光明顶（微信）">
<meta property="og:image" content="http://p5pm39us4.bkt.clouddn.com/15222051429650.jpg">
<meta property="og:image" content="http://p5pm39us4.bkt.clouddn.com/15222055181381.jpg">
<meta property="og:image" content="http://p5pm39us4.bkt.clouddn.com/15222057004892.jpg">
<meta property="og:image" content="http://yoursite.com/2018/03/28/快应用/media/15222038407580/15222190174810.jpg">
<meta property="og:updated_time" content="2018-03-28T11:14:24.109Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="快应用">
<meta name="twitter:description" content="快应用：十大手机门派围攻光明顶（微信）">
<meta name="twitter:image" content="http://p5pm39us4.bkt.clouddn.com/15222051429650.jpg">
  
    <link rel="alternate" href="/atom.xml" title="陈功【趣店】" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">陈功【趣店】</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Suche"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-快应用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/28/快应用/" class="article-date">
  <time datetime="2018-03-28T10:50:43.000Z" itemprop="datePublished">2018-03-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      快应用
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>快应用：十大手机门派围攻光明顶（微信）</p>
<a id="more"></a>
<h1 id="快应用"><a href="#快应用" class="headerlink" title="快应用"></a>快应用</h1><p><a href="https://www.quickapp.cn/" target="_blank" rel="noopener">快应用官网</a></p>
<h3 id="什么是快应用"><a href="#什么是快应用" class="headerlink" title="什么是快应用"></a>什么是快应用</h3><ol>
<li><p>快应用是<strong>十大手机厂商</strong>基于手机硬件平台的新型应用形态，标准是由主流手机厂商组成的快应用联盟联合制定。</p>
</li>
<li><p>快应用标准的诞生将在研发接口、能力接入、开发者服务等层面建设标准平台，以平台化的生态模式对个人开发者和企业开发者全品类开放。</p>
</li>
<li><p>快应用具备传统APP完整的应用体验，<strong>无需安装</strong>、<strong>即点即用</strong>，享受<strong>原生</strong>应用的性能体验。</p>
</li>
</ol>
<h3 id="十大手机厂商"><a href="#十大手机厂商" class="headerlink" title="十大手机厂商"></a>十大手机厂商</h3><p>华为、小米、中兴、金立、联想、魅族、努比亚、OPPO、vivo、一加</p>
<h3 id="用来抗衡小程序"><a href="#用来抗衡小程序" class="headerlink" title="用来抗衡小程序"></a>用来抗衡小程序</h3><p>小程序使手机厂商为此不仅失去了应用分发的价值，也被截断了预装和广告营销的红利。为此，手机厂商必须建立一种新的规则重构应用分发机制，这就成为“快应用”推出的根本原因。</p>
<blockquote>
<p>十大门派围攻“光明顶”的节奏？</p>
</blockquote>
<h3 id="快应用特点"><a href="#快应用特点" class="headerlink" title="快应用特点"></a>快应用特点</h3><ul>
<li>使用前端技术栈开发</li>
<li>原生渲染</li>
<li>同时具备 HTML 5 页面和原生应用的双重优点</li>
<li>免安装、免存储、一键直达、更新直接推送</li>
<li>包体小，无需下载、即点即用； </li>
<li>覆盖10亿设备 - 用户量级巨大； </li>
<li>更多的应用场景，比如全局搜索、负一屏等场景的应用 </li>
</ul>
<h3 id="使用案例"><a href="#使用案例" class="headerlink" title="使用案例"></a>使用案例</h3><p>在App的情况下，你首先需要知道有饿了么、美团等外卖App可以寻找美食，然后需要到应用市场中下载安装这些App，然后打开这些App，搜索“比萨”。而有了“快应用”，你拿到新的手机后，不需要知道哪个App可以帮你寻找美食，也不需要去下载那个App，你只需要下拉桌面打开搜索框，输入“比萨”，即可轻松获取相应的服务。</p>
<h3 id="账号注册流程"><a href="#账号注册流程" class="headerlink" title="账号注册流程"></a>账号注册流程</h3><p><img src="http://p5pm39us4.bkt.clouddn.com/15222051429650.jpg" alt=""></p>
<h3 id="发布审核流程"><a href="#发布审核流程" class="headerlink" title="发布审核流程"></a>发布审核流程</h3><p><img src="http://p5pm39us4.bkt.clouddn.com/15222055181381.jpg" alt=""></p>
<p><img src="http://p5pm39us4.bkt.clouddn.com/15222057004892.jpg" alt=""></p>
<h3 id="项目快速搭建"><a href="#项目快速搭建" class="headerlink" title="项目快速搭建"></a>项目快速搭建</h3><p>要求 node 6.0 以上版本</p>
<p>注意: <strong>不要使用8.0.*版本</strong>．这个版本内部ZipStream实现与node-archive包不兼容，会引起报错</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hap-toolkit  //全局安装toolkit工具</span><br><span class="line"></span><br><span class="line">hap -V  //输出版本号表示安装成功</span><br><span class="line"></span><br><span class="line">hap init &lt;ProjectName&gt;  //创建项目模板</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> &lt;ProjectName&gt; //进入项目模板</span><br><span class="line"></span><br><span class="line">npm install //安装依赖，</span><br><span class="line">    //使用 yarn 会报错，因为依赖的 koa2 要求node7.6以上</span><br><span class="line">    //不能删除 node_modules 目录再重新 npm install，</span><br><span class="line">    //因为已经有了 hap-tool 的包了，而package.json里没有</span><br><span class="line"></span><br><span class="line">npm run watch //热编译</span><br><span class="line"></span><br><span class="line">npm run server //启动服务，手机扫码预览效果</span><br></pre></td></tr></table></figure>
<p>项目的目录结构<br><img src="media/15222038407580/15222190174810.jpg" alt=""></p>
<p>项目文件以 <code>.ux</code> 后缀<br>内分三块：<code>template</code>、<code>style</code>、<code>script</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- template里只能有一个根节点 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"demo-page"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span>&#123;&#123;text&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">  .demo-page &#123;</span></span><br><span class="line"><span class="undefined">    flex-direction: column;</span></span><br><span class="line"><span class="undefined">    justify-content: center;</span></span><br><span class="line"><span class="undefined">    align-items: center;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">    data: &#123;</span></span><br><span class="line"><span class="javascript">      text: <span class="string">'欢迎打开详情页1'</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h3><ul>
<li>页面的生命周期：<code>onInit、onReady、onShow、onHide、onDestroy、onBackPress、onMenuPress</code></li>
<li>页面的状态：显示、隐藏、销毁</li>
<li>APP的生命周期：<code>onCreate、onDestroy</code></li>
</ul>
<h4 id="页面的生命周期"><a href="#页面的生命周期" class="headerlink" title="页面的生命周期"></a>页面的生命周期</h4><h5 id="onInit"><a href="#onInit" class="headerlink" title="onInit()"></a>onInit()</h5><p>表示VM的数据（events,props,data）已经准备好；所以你可以使用props，data中的数据，</p>
<blockquote>
<p>类似 vue 的 <code>created</code></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">data: &#123;</span><br><span class="line">  <span class="comment">// 生命周期的文本列表</span></span><br><span class="line">  lcList: []</span><br><span class="line">&#125;,</span><br><span class="line">onInit () &#123;</span><br><span class="line">  <span class="keyword">this</span>.$page.setTitleBar(&#123; <span class="attr">text</span>: <span class="string">'生命周期'</span> &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.lcList.push(<span class="string">'onInit'</span>)</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.info(<span class="string">`触发：onInit`</span>)</span><br><span class="line">  <span class="built_in">console</span>.info(<span class="string">`执行：获取data的lcList属性：<span class="subst">$&#123;<span class="keyword">this</span>.lcList&#125;</span>`</span>)   <span class="comment">// 执行：获取data的lcList属性：onInit</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="onReady"><a href="#onReady" class="headerlink" title="onReady()"></a>onReady()</h5><p>表示VM的模板已经编译完成，所以你可以获取DOM节点，（如：this.$element(idxxx)），</p>
<blockquote>
<p>类似 vue 的 mounted</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">onReady () &#123;</span><br><span class="line">  <span class="keyword">this</span>.lcList.push(<span class="string">'onReady'</span>)</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.info(<span class="string">`触发：onReady`</span>)</span><br><span class="line">  <span class="built_in">console</span>.info(<span class="string">`执行：获取模板节点：<span class="subst">$&#123;<span class="keyword">this</span>.$rootElement()&#125;</span>`</span>)   <span class="comment">// 执行：获取模板节点：&lt;div attr=&#123;&#125; style=&#123;"flexDirection":"column"&#125;&gt;...&lt;/div&gt;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="onShow-onHide"><a href="#onShow-onHide" class="headerlink" title="onShow(), onHide()"></a>onShow(), onHide()</h5><ul>
<li><p>APP中可以同时运行多个页面，但是每次只能显示其中一个页面；和SPA开发倒有点相似，切换页面但浏览器全局Context是共享的</p>
</li>
<li><p>所以页面的切换，就产生了新的事件：页面被切换隐藏时调用onHide()，页面被切换重新显示时调用onShow()</p>
</li>
<li><p>判断页面的显示状态，可以调用VM的$visible属性：true表示显示，false表示隐藏</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">onShow () &#123;</span><br><span class="line">  <span class="keyword">this</span>.lcList.push(<span class="string">'onShow'</span>)</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.info(<span class="string">`触发：onShow`</span>)</span><br><span class="line">  <span class="built_in">console</span>.info(<span class="string">`执行：获取页面显示状态属性：<span class="subst">$&#123;<span class="keyword">this</span>.$visible&#125;</span>`</span>)  <span class="comment">// true</span></span><br><span class="line">&#125;</span><br><span class="line">onHide () &#123;</span><br><span class="line">  <span class="keyword">this</span>.lcList.push(<span class="string">'onHide'</span>)</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.info(<span class="string">`触发：onHide`</span>)</span><br><span class="line">  <span class="built_in">console</span>.info(<span class="string">`执行：获取页面显示状态属性：<span class="subst">$&#123;<span class="keyword">this</span>.$visible&#125;</span>`</span>)  <span class="comment">// false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="onDestroy"><a href="#onDestroy" class="headerlink" title="onDestroy()"></a>onDestroy()</h5><p>页面被销毁时调用, 做一些释放资源的操作，如：取消接口订阅监听geolocation.susubscribe()</p>
<p>判断页面是否处于被销毁状态，可以调用VM的$valid属性：true表示存在，false表示销毁</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">onDestroy () &#123;</span><br><span class="line">  <span class="built_in">console</span>.info(<span class="string">`触发：onDestroy`</span>)</span><br><span class="line">  <span class="built_in">console</span>.info(<span class="string">`执行：页面要被销毁，销毁状态：<span class="subst">$&#123;<span class="keyword">this</span>.$valid&#125;</span>，应该做取消接口订阅监听的操作: geolocation.susubscribe()`</span>)    </span><br><span class="line">  <span class="comment">// true，即将销毁</span></span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.info(<span class="string">`执行：页面已被销毁，不会执行`</span>)  <span class="comment">// 页面已销毁，不会执行</span></span><br><span class="line">  &#125;.bind(<span class="keyword">this</span>), <span class="number">0</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="onBackPress"><a href="#onBackPress" class="headerlink" title="onBackPress()"></a>onBackPress()</h5><p>当用户点击返回实体按键、左上角返回菜单、调用返回API时触发该事件</p>
<h5 id="onMenuPress"><a href="#onMenuPress" class="headerlink" title="onMenuPress()"></a>onMenuPress()</h5><p>当使用原生的顶部标题栏时，可以通过manifest.json中的menu属性配置是否显示右上角的菜单</p>
<h4 id="页面的状态"><a href="#页面的状态" class="headerlink" title="页面的状态"></a>页面的状态</h4><ol>
<li>显示：该页面就是当前APP正在显示的页面，用$visible判断</li>
<li>隐藏：该页面上打开新页面后，该页面被隐藏，用$visible判断</li>
<li>销毁：该页面因某原因销毁后，就不会再执行里面的代码，用$valid判断</li>
</ol>
<h4 id="APP的状态"><a href="#APP的状态" class="headerlink" title="APP的状态"></a>APP的状态</h4><p>当前为APP的生命周期提供了两个回调函数：<code>onCreate</code>, <code>onDestroy</code>；可在app.ux中定义回调函数，在app.ux中，开发者可以做一些独立于页面的操作。比如：引入公共的JS资源，然后暴露给所有页面</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  onCreate () &#123;</span><br><span class="line">    <span class="built_in">console</span>.info(<span class="string">'Application onCreate'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  onDestroy () &#123;</span><br><span class="line">    <span class="built_in">console</span>.info(<span class="string">'Application onDestroy'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 暴露给所有页面的数据，在页面中通过：this.$app.$def.data1访问</span></span><br><span class="line">  data1: &#123;</span><br><span class="line">    name: <span class="string">'这是APP存的数据'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 暴露给所有页面的方法，在页面中通过：this.$app.$def.method1()访问</span></span><br><span class="line">  method1 () &#123;</span><br><span class="line">    <span class="built_in">console</span>.info(<span class="string">'这是APP的方法'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**manifest**/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="样式"><a href="#样式" class="headerlink" title="样式"></a>样式</h3><h5 id="盒模型："><a href="#盒模型：" class="headerlink" title="盒模型："></a>盒模型：</h5><p>框架使用border-box模型，暂不支持content-box模型与box-sizing属性</p>
<h5 id="长度单位："><a href="#长度单位：" class="headerlink" title="长度单位："></a>长度单位：</h5><p>仅支持 <code>px</code> 和 <code>%</code> 。与传统web页面不同，px是相对于项目配置基准宽度的单位，已经适配了移动端屏幕，其原理类似于rem</p>
<h5 id="设置样式："><a href="#设置样式：" class="headerlink" title="设置样式："></a>设置样式：</h5><p>内联样式、tag选择器、class选择器、id选择器、并列选择、后代选择器</p>
<h5 id="Flex布局："><a href="#Flex布局：" class="headerlink" title="Flex布局："></a>Flex布局：</h5><p>框架本身的布局使用Flex布局模型，div组件为最常用的Flex容器组件。<br>text、a、span、label组件为文本容器组件，其它组件不能直接放置文本内容</p>
<h3 id="框架指令、组件"><a href="#框架指令、组件" class="headerlink" title="框架指令、组件"></a>框架指令、组件</h3><ul>
<li>指令for</li>
<li>指令if与指令show</li>
<li>组件block</li>
<li>组件slot</li>
</ul>
<h5 id="指令for"><a href="#指令for" class="headerlink" title="指令for"></a>指令for</h5><ul>
<li>for指令用于循环输出一个数组类型的数据，</li>
<li>和 v-for 不同的地方：item 和 index 的顺序相反，</li>
<li>自定义变量表示for指令的数组索引和数组元素时，变量名不可以用<code>$</code>或<code>_</code>开头</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tutorial-page"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 方式1：默认$item代表数组中的元素, $idx代表数组中的索引 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tutorial-row"</span> <span class="attr">for</span>=<span class="string">"&#123;&#123;list&#125;&#125;"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;$idx&#125;&#125;.&#123;&#123;$item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 方式2：自定义元素变量名称 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tutorial-row"</span> <span class="attr">for</span>=<span class="string">"value in list"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;$idx&#125;&#125;.&#123;&#123;value.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 方式3：自定义元素、索引的变量名称 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tutorial-row"</span> <span class="attr">for</span>=<span class="string">"(personIndex, personItem) in list"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;personIndex&#125;&#125;.&#123;&#123;personItem.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="指令if与指令show"><a href="#指令if与指令show" class="headerlink" title="指令if与指令show"></a>指令if与指令show</h5><ul>
<li>if条件指令，是指if/elif/else这3个相关指令，用于控制是否增加或者删除组件；</li>
<li>if/elif/else节点必须是相邻的兄弟节点</li>
<li>show指令，是指是否显示组件，用于控制组件的显示状态，并不会从DOM结构中删除；</li>
</ul>
<blockquote>
<p>类比 vue 的 v-if、v-show</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tutorial-page"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">onclick</span>=<span class="string">"onClickShow"</span>&gt;</span>显示隐藏：<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">show</span>=<span class="string">"&#123;&#123;showVar&#125;&#125;"</span>&gt;</span>show: 渲染但控制是否显示<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">onclick</span>=<span class="string">"onClickCondition"</span>&gt;</span>条件指令：<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">if</span>=<span class="string">"&#123;&#123;conditionVar === 1&#125;&#125;"</span>&gt;</span>if: if条件<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">elif</span>=<span class="string">"&#123;&#123;conditionVar === 2&#125;&#125;"</span>&gt;</span>elif: elif条件<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">else</span>&gt;</span>else: 其余<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">  .tutorial-page &#123;</span></span><br><span class="line"><span class="undefined">    flex-direction: column;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">    onInit () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$page.setTitleBar(&#123; <span class="attr">text</span>: <span class="string">'指令if与指令show'</span> &#125;)</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    data: &#123;</span></span><br><span class="line"><span class="javascript">      showVar: <span class="literal">true</span>,</span></span><br><span class="line"><span class="undefined">      conditionVar: 1</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    onClickShow () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.showVar = !<span class="keyword">this</span>.showVar</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    onClickCondition () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.conditionVar = ++<span class="keyword">this</span>.conditionVar % <span class="number">3</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="组件block"><a href="#组件block" class="headerlink" title="组件block"></a>组件block</h5><ul>
<li>block组件是表达逻辑区块的组件，没有对应的Native组件。可以使用<block>实现更为灵活的”列表/条件渲染”。如在<block>上混合使用for指令、if指令和show指令</block></block></li>
</ul>
<h5 id="组件slot"><a href="#组件slot" class="headerlink" title="组件slot"></a>组件slot</h5><ul>
<li><p>slot节点用于向开发者额外开发的自定义ux组件中插入内容；</p>
</li>
<li><p>通常自定义组件的模板中提供slot组件，当该组件被引入到页面组件中后，开发者可以灵活定义该自定义组件内部的子内容。</p>
</li>
</ul>
<blockquote>
<p>类似 vue 的 slot</p>
</blockquote>
<h3 id="通过组件a切换页面和传递参数"><a href="#通过组件a切换页面和传递参数" class="headerlink" title="通过组件a切换页面和传递参数"></a>通过组件a切换页面和传递参数</h3><h5 id="切换页面"><a href="#切换页面" class="headerlink" title="切换页面"></a>切换页面</h5><ul>
<li>组件a可通过配置href属性跳转到应用内的页面</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tutorial-page"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 以'/'开头的应用内页面的路径 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/PageParams/receiveparams"</span>&gt;</span>跳转到接收参数页面<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 以非'/'开头的应用内页面的名称 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"PageParams/receiveparams"</span>&gt;</span>跳转到接收参数页面<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 特殊的,如果uri的值是'/',则跳转到path为'/'的页,没有则跳转到首页--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/"</span>&gt;</span>跳转到首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>组件a还提供调起电话、短信、邮件的功能和加载网页的能力</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tutorial-page"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 包含完整schema的uri --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"tel:10086"</span>&gt;</span>调起电话<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"sms:10086"</span>&gt;</span>调起短信<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"mailto:example@xx.com"</span>&gt;</span>调起邮件<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 打开webview加载网页 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://www.baidu.com/"</span>&gt;</span>打开网页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="传递参数"><a href="#传递参数" class="headerlink" title="传递参数"></a>传递参数</h5><p>通过组件a实现页面切换时，可以通过’?key=value’的方式添加参数，支持参数为变量</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tutorial-page"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 添加参数 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/PageParams/receiveparams?key=Hello, world!"</span>&gt;</span>携带参数key1跳转<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 添加变量参数 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/PageParams/receiveparams?key=&#123;&#123;title&#125;&#125;"</span>&gt;</span>携带参数key2跳转<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">    data: &#123;</span></span><br><span class="line"><span class="javascript">      title: <span class="string">"Hello, world!"</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="通过接口router切换页面和传递参数"><a href="#通过接口router切换页面和传递参数" class="headerlink" title="通过接口router切换页面和传递参数"></a>通过接口router切换页面和传递参数</h3><h5 id="切换页面-1"><a href="#切换页面-1" class="headerlink" title="切换页面"></a>切换页面</h5><ul>
<li>router接口在使用前，需要先导入模块</li>
<li>router.push(OBJECT)支持的参数url与组件a的href属性完全一致</li>
<li>router.replace(OBJECT)的支持的参数url不支持调起电话、短信、邮件，其他与push一致</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tutorial-page"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"btn"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"跳转到接收参数页面"</span> <span class="attr">onclick</span>=<span class="string">"routePagePush"</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"btn"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"跳转到接收参数页面，当前页面无法返回"</span> <span class="attr">onclick</span>=<span class="string">"routePageReplace"</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"btn"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"返回上一页"</span> <span class="attr">onclick</span>=<span class="string">"routePageBack"</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"btn"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"清空页面记录，仅保留当前页面"</span> <span class="attr">onclick</span>=<span class="string">"routePageClear"</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'@system.router'</span>   <span class="comment">// 导入模块</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">    routePagePush () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 跳转到应用内的某个页面</span></span></span><br><span class="line"><span class="undefined">      router.push(&#123;</span></span><br><span class="line"><span class="javascript">        uri: <span class="string">'/PageParams/receiveparams'</span></span></span><br><span class="line"><span class="undefined">      &#125;)</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    routePageReplace () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 跳转到应用内的某个页面，当前页面无法返回</span></span></span><br><span class="line"><span class="undefined">      router.replace(&#123;</span></span><br><span class="line"><span class="javascript">        uri: <span class="string">'/PageParams/receiveparams'</span></span></span><br><span class="line"><span class="undefined">      &#125;)</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    routePageBack () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 返回上一页面</span></span></span><br><span class="line"><span class="undefined">      router.back()</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    routePageClear () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 清空所有历史页面记录，仅保留当前页面</span></span></span><br><span class="line"><span class="undefined">      router.clear()</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="传递参数-1"><a href="#传递参数-1" class="headerlink" title="传递参数"></a>传递参数</h5><p>router接口的参数params可配置页面跳转时需要传递的参数</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tutorial-page"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"btn"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"携带参数跳转页面"</span> <span class="attr">onclick</span>=<span class="string">"routePagePushWithParams"</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"btn"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"携带参数跳转页面，当前页面无法返回"</span> <span class="attr">onclick</span>=<span class="string">"routePageReplaceWithParams"</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 导入模块</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'@system.router'</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">    data: &#123;</span></span><br><span class="line"><span class="javascript">      title: <span class="string">'Hello, world!'</span></span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    routePagePushWithParams () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 跳转到应用内的某个页面</span></span></span><br><span class="line"><span class="undefined">      router.push(&#123;</span></span><br><span class="line"><span class="javascript">        uri: <span class="string">'/PageParams/receiveparams'</span>,</span></span><br><span class="line"><span class="javascript">        params: &#123; <span class="attr">key</span>: <span class="keyword">this</span>.title &#125;</span></span><br><span class="line"><span class="undefined">      &#125;)</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    routePageReplaceWithParams () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 跳转到应用内的某个页面，当前页面无法返回</span></span></span><br><span class="line"><span class="undefined">      router.replace(&#123;</span></span><br><span class="line"><span class="javascript">        uri: <span class="string">'/PageParams/receiveparams'</span>,</span></span><br><span class="line"><span class="javascript">        params: &#123; <span class="attr">key</span>: <span class="keyword">this</span>.title &#125;</span></span><br><span class="line"><span class="undefined">      &#125;)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="接收参数"><a href="#接收参数" class="headerlink" title="接收参数"></a>接收参数</h5><ul>
<li>组件a和接口router传递的参数的接收方法完全一致,</li>
<li>在页面的ViewModel的data属性中声明使用的属性</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tutorial-page"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>page<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- template中显示页面传递的参数 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;key&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">    data: &#123;</span></span><br><span class="line"><span class="javascript">      key: <span class="string">''</span></span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    onInit () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$page.setTitleBar(&#123; <span class="attr">text</span>: <span class="string">'接收参数'</span> &#125;)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="comment">// js中输出页面传递的参数</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.info(<span class="string">'key: '</span> + <span class="keyword">this</span>.key)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="回传参数"><a href="#回传参数" class="headerlink" title="回传参数"></a>回传参数</h5><ul>
<li><p>假设存在页面A和页面B，先从页面A跳转至页面B，然后从页面B返回到页面A时，需要传递参数</p>
</li>
<li><p>此时，组件a和接口router传参不能满足需求，可以借助于app级别的对象：<code>this.$app.$data</code></p>
</li>
</ul>
<h3 id="事件监听与触发"><a href="#事件监听与触发" class="headerlink" title="事件监听与触发"></a>事件监听与触发</h3><ul>
<li>监听与移除监听事件：<code>$on()、$off</code></li>
<li>触发VM事件：<code>$emit()</code></li>
<li>监听原生组件事件</li>
<li>触发原生组件事件：<code>$emitElement()</code></li>
</ul>
<h5 id="监听与移除监听事件"><a href="#监听与移除监听事件" class="headerlink" title="监听与移除监听事件"></a>监听与移除监听事件</h5><ul>
<li><code>$on</code> 用于监听自定义事件；</li>
<li><code>$off</code> 移除对应的事件监听</li>
</ul>
<h5 id="on-evtName-fnHandler"><a href="#on-evtName-fnHandler" class="headerlink" title="$on(evtName, fnHandler)"></a>$on(evtName, fnHandler)</h5><p>在当前页面注册监听事件， 可监听<code>$emit()、 $dispatch()、 $broadcast()</code>等触发的自定义事件，不能用于注册组件节点的事件响应</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    onInit()&#123;</span><br><span class="line">      <span class="keyword">this</span>.$on(<span class="string">'customEvtType1'</span>, <span class="keyword">this</span>.customEvtType1Handler)</span><br><span class="line">    &#125;,</span><br><span class="line">    customEvtType1Handler(evt)&#123;</span><br><span class="line">      <span class="comment">// 事件类型，事件参数</span></span><br><span class="line">      <span class="built_in">console</span>.info(<span class="string">`触发事件：类型：<span class="subst">$&#123;evt.type&#125;</span>, 参数： <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(evt.detail)&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h5 id="off-evtName-fnHandler"><a href="#off-evtName-fnHandler" class="headerlink" title="$off(evtName, fnHandler)"></a>$off(evtName, fnHandler)</h5><p>移除事件监听，参数 fnHandler 为可选，传递仅移除指定的响应函数，不传递则移除此事件的所有监听</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    removeEventHandler () &#123;</span><br><span class="line">      <span class="comment">// 不传递fnHandler：移除所有监听</span></span><br><span class="line">      <span class="keyword">this</span>.$off(<span class="string">'customEvtType1'</span>)</span><br><span class="line">      <span class="comment">// 传递fnHandler：移除指定的监听函数</span></span><br><span class="line">      <span class="keyword">this</span>.$off(<span class="string">'customEvtType1'</span>, <span class="keyword">this</span>.customEvtType1Handler)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h5 id="emit-evtName-evtDetail"><a href="#emit-evtName-evtDetail" class="headerlink" title="$emit(evtName, evtDetail)"></a>$emit(evtName, evtDetail)</h5><ul>
<li>触发事件</li>
<li><code>$emit()</code> 目前只触发 <code>$on</code> 所监听的事件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">   emitEvent () &#123;</span><br><span class="line">     <span class="keyword">this</span>.$emit(<span class="string">'customEvtType1'</span>, &#123; <span class="attr">params</span>: <span class="string">'参数内容'</span> &#125;)</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h5 id="监听原生组件事件"><a href="#监听原生组件事件" class="headerlink" title="监听原生组件事件"></a>监听原生组件事件</h5><ol>
<li>在响应函数执行时通过target获取</li>
<li>在响应函数绑定时传递参数</li>
</ol>
<h5 id="触发原生组件事件"><a href="#触发原生组件事件" class="headerlink" title="触发原生组件事件"></a>触发原生组件事件</h5><ul>
<li>用户手动操作触发事件，响应回调；</li>
<li>在代码中通过<code>$emitElement()</code>完成事件的动态触发</li>
<li><code>$emitElement(evtName, evtDetail, id)</code></li>
</ul>
<h3 id="父子组件通信"><a href="#父子组件通信" class="headerlink" title="父子组件通信"></a>父子组件通信</h3><h5 id="props-（Array）"><a href="#props-（Array）" class="headerlink" title="props （Array）"></a>props （Array）</h5><p>子组件的 props 属性，是一个数组，接收父组件传递的数据</p>
<h5 id="引入自定义组件"><a href="#引入自定义组件" class="headerlink" title="引入自定义组件"></a>引入自定义组件</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">import</span> name=<span class="string">"comp-part1"</span> src=<span class="string">"./part1"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">import</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p><code>&lt;import&gt;</code>标签中的的<code>src</code>属性指定自定义组件的地址，<code>name</code>属性指定在引用该组件时使用的标签名称</p>
<h5 id="传递数据与数据改造"><a href="#传递数据与数据改造" class="headerlink" title="传递数据与数据改造"></a>传递数据与数据改造</h5><p>需要在子组件中对数据进行改造，但又不想改动父组件数据时，可以使用$watch()来满足需求。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 子组件</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">    props: [</span></span><br><span class="line"><span class="javascript">      <span class="string">'prop1'</span>,</span></span><br><span class="line"><span class="javascript">      <span class="string">'prop2Object'</span></span></span><br><span class="line"><span class="undefined">    ],</span></span><br><span class="line"><span class="undefined">    data () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">        upperProp1: <span class="keyword">this</span>.prop1</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    onInit () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.info(<span class="string">`外部传递的数据：`</span>, <span class="keyword">this</span>.prop1, <span class="keyword">this</span>.prop2Object)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 监听数据变化</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$watch(<span class="string">'prop1'</span>, <span class="string">'watchPropsChange'</span>)</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$watch(<span class="string">'prop2Object.name'</span>, <span class="string">'watchPropsChange'</span>)</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    /**</span></span><br><span class="line"><span class="undefined">     * 监听数据变化，你可以对数据处理后，设置值到data上</span></span><br><span class="line"><span class="undefined">     * @param newV</span></span><br><span class="line"><span class="undefined">     * @param oldV</span></span><br><span class="line"><span class="undefined">     */</span></span><br><span class="line"><span class="undefined">    watchPropsChange (newV, oldV) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.info(<span class="string">`监听数据变化：`</span>, newV, oldV)</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.upperProp1 = newV &amp;&amp; newV.toUpperCase()</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="组件之间的事件触发"><a href="#组件之间的事件触发" class="headerlink" title="组件之间的事件触发"></a>组件之间的事件触发</h5><ul>
<li>父组件传递的数据本身就是对象，子组件直接修改的就是这个对象中的属性；那么父组件同样也就拿到了最终数据</li>
<li>子组件在data中保存了一份内部数据，需要交给父组件：子组件通过<code>$dispatch()</code>完成事件触发，父组件通过<code>$on()</code>绑定事件并响应</li>
<li>子组件在data中保存了一份内部数据，需要交给父组件：子组件通过<code>$emit()</code>触发在节点上绑定的事件来执行父组件的方法，如：evtType3；</li>
</ul>
<blockquote>
<p>和 vue 基本一样</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/28/快应用/" data-id="cjgopxzq10005184keah1p8xt" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/05/02/macbook-长时间睡眠唤醒出现花屏/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Neuer</strong>
      <div class="article-nav-title">
        
          macbook 长时间睡眠唤醒出现花屏
        
      </div>
    </a>
  
  
    <a href="/2018/03/14/node8-md/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Älter</strong>
      <div class="article-nav-title">Node.js 8 中的重要新特性及优化</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/05/02/macbook-长时间睡眠唤醒出现花屏/">macbook 长时间睡眠唤醒出现花屏</a>
          </li>
        
          <li>
            <a href="/2018/03/28/快应用/">快应用</a>
          </li>
        
          <li>
            <a href="/2018/03/14/node8-md/">Node.js 8 中的重要新特性及优化</a>
          </li>
        
          <li>
            <a href="/2018/03/14/webpack4/">webpack4.0新版本变化</a>
          </li>
        
          <li>
            <a href="/2018/03/14/my-first-hexo-blog/">my first hexo blog</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>